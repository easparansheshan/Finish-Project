{"ast":null,"code":"var _jsxFileName = \"/home/sheshan/Desktop/project final/ecommerce-admin-app-5d94c3869c7df6a705a70739eb09e9b49d1dd4cd/src/containers/Products/index.js\";\nimport React, { useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Container, Row, Col, Table } from \"react-bootstrap\";\nimport Input from \"../../components/UI/Input\";\nimport Modal from \"../../components/UI/Modal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addProduct, deleteProductById } from \"../../actions\";\nimport { generatePublicUrl } from \"../../urlConfig\";\nimport \"./style.css\";\n/**\n * @author\n * @function Products\n **/\n\nconst Products = props => {\n  const [name, setName] = useState(\"\");\n  const [quantity, setQuantity] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [categoryId, setCategoryId] = useState(\"\");\n  const [productPictures, setProductPictures] = useState([]);\n  const [show, setShow] = useState(false);\n  const [productDetailModal, setProductDetailModal] = useState(false);\n  const [productDetails, setProductDetails] = useState(null);\n  const category = useSelector(state => state.category);\n  const product = useSelector(state => state.product);\n  const dispatch = useDispatch();\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const submitProductForm = () => {\n    const form = new FormData();\n    form.append(\"name\", name);\n    form.append(\"quantity\", quantity);\n    form.append(\"price\", price);\n    form.append(\"description\", description);\n    form.append(\"category\", categoryId);\n\n    for (let pic of productPictures) {\n      form.append(\"productPicture\", pic);\n    }\n\n    dispatch(addProduct(form)).then(() => setShow(false));\n  };\n\n  const handleShow = () => setShow(true);\n\n  const createCategoryList = (categories, options = []) => {\n    for (let category of categories) {\n      options.push({\n        value: category._id,\n        name: category.name\n      });\n\n      if (category.children.length > 0) {\n        createCategoryList(category.children, options);\n      }\n    }\n\n    return options;\n  };\n\n  const handleProductPictures = e => {\n    setProductPictures([...productPictures, e.target.files[0]]);\n  };\n\n  const renderProducts = () => {\n    return /*#__PURE__*/React.createElement(Table, {\n      style: {\n        fontSize: 12\n      },\n      responsive: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, product.products.length > 0 ? product.products.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n      key: product._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, \"2\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }, product.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, product.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, product.quantity), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, product.category.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: () => showProductDetailsModal(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, \"info\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        const payload = {\n          productId: product._id\n        };\n        dispatch(deleteProductById(payload));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, \"del\")))) : null));\n  };\n\n  const renderAddProductModal = () => {\n    return /*#__PURE__*/React.createElement(Modal, {\n      show: show,\n      handleClose: handleClose,\n      modalTitle: \"Add New Product\",\n      onSubmit: submitProductForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      label: \"Name\",\n      value: name,\n      placeholder: `Product Name`,\n      onChange: e => setName(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      label: \"Quantity\",\n      value: quantity,\n      placeholder: `Quantity`,\n      onChange: e => setQuantity(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      label: \"Price\",\n      value: price,\n      placeholder: `Price`,\n      onChange: e => setPrice(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      label: \"Description\",\n      value: description,\n      placeholder: `Description`,\n      onChange: e => setDescription(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: categoryId,\n      onChange: e => setCategoryId(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }, \"select category\"), createCategoryList(category.categories).map(option => /*#__PURE__*/React.createElement(\"option\", {\n      key: option.value,\n      value: option.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, option.name))), productPictures.length > 0 ? productPictures.map((pic, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, pic.name)) : null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"productPicture\",\n      onChange: handleProductPictures,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const handleCloseProductDetailsModal = () => {\n    setProductDetailModal(false);\n  };\n\n  const showProductDetailsModal = product => {\n    setProductDetails(product);\n    setProductDetailModal(true);\n  };\n\n  const renderProductDetailsModal = () => {\n    if (!productDetails) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(Modal, {\n      show: productDetailModal,\n      handleClose: handleCloseProductDetailsModal,\n      modalTitle: \"Product Details\",\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, productDetails.name)), /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, productDetails.price))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, productDetails.quantity)), /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, productDetails.category.name))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, productDetails.description))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, \"Product Pictures\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }\n    }, productDetails.productPictures.map(picture => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"productImgContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: generatePublicUrl(picture.img),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }\n    })))))));\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    sidebar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, \"Products\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, \"Add\")))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 11\n    }\n  }, renderProducts()))), renderAddProductModal(), renderProductDetailsModal());\n};\n\nexport default Products;","map":{"version":3,"sources":["/home/sheshan/Desktop/project final/ecommerce-admin-app-5d94c3869c7df6a705a70739eb09e9b49d1dd4cd/src/containers/Products/index.js"],"names":["React","useState","Layout","Container","Row","Col","Table","Input","Modal","useSelector","useDispatch","addProduct","deleteProductById","generatePublicUrl","Products","props","name","setName","quantity","setQuantity","price","setPrice","description","setDescription","categoryId","setCategoryId","productPictures","setProductPictures","show","setShow","productDetailModal","setProductDetailModal","productDetails","setProductDetails","category","state","product","dispatch","handleClose","submitProductForm","form","FormData","append","pic","then","handleShow","createCategoryList","categories","options","push","value","_id","children","length","handleProductPictures","e","target","files","renderProducts","fontSize","products","map","showProductDetailsModal","payload","productId","renderAddProductModal","option","index","handleCloseProductDetailsModal","renderProductDetailsModal","display","picture","img","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Container, Row, Col, Table } from \"react-bootstrap\";\nimport Input from \"../../components/UI/Input\";\nimport Modal from \"../../components/UI/Modal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addProduct, deleteProductById } from \"../../actions\";\nimport { generatePublicUrl } from \"../../urlConfig\";\nimport \"./style.css\";\n\n/**\n * @author\n * @function Products\n **/\n\nconst Products = (props) => {\n  const [name, setName] = useState(\"\");\n  const [quantity, setQuantity] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [categoryId, setCategoryId] = useState(\"\");\n  const [productPictures, setProductPictures] = useState([]);\n  const [show, setShow] = useState(false);\n  const [productDetailModal, setProductDetailModal] = useState(false);\n  const [productDetails, setProductDetails] = useState(null);\n  const category = useSelector((state) => state.category);\n  const product = useSelector((state) => state.product);\n  const dispatch = useDispatch();\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const submitProductForm = () => {\n    const form = new FormData();\n    form.append(\"name\", name);\n    form.append(\"quantity\", quantity);\n    form.append(\"price\", price);\n    form.append(\"description\", description);\n    form.append(\"category\", categoryId);\n\n    for (let pic of productPictures) {\n      form.append(\"productPicture\", pic);\n    }\n\n    dispatch(addProduct(form)).then(() => setShow(false));\n  };\n  const handleShow = () => setShow(true);\n\n  const createCategoryList = (categories, options = []) => {\n    for (let category of categories) {\n      options.push({ value: category._id, name: category.name });\n      if (category.children.length > 0) {\n        createCategoryList(category.children, options);\n      }\n    }\n\n    return options;\n  };\n\n  const handleProductPictures = (e) => {\n    setProductPictures([...productPictures, e.target.files[0]]);\n  };\n\n  const renderProducts = () => {\n    return (\n      <Table style={{ fontSize: 12 }} responsive=\"sm\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Name</th>\n            <th>Price</th>\n            <th>Quantity</th>\n            <th>Category</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {product.products.length > 0\n            ? product.products.map((product) => (\n                <tr key={product._id}>\n                  <td>2</td>\n                  <td>{product.name}</td>\n                  <td>{product.price}</td>\n                  <td>{product.quantity}</td>\n                  <td>{product.category.name}</td>\n                  <td>\n                    <button className= \"btn btn-info\"onClick={() => showProductDetailsModal(product)}>\n\n                      info\n                    </button>\n                    <button\n                      onClick={() => {\n                        const payload = {\n                          productId: product._id,\n                        };\n                        dispatch(deleteProductById(payload));\n                      }}\n                    >\n                      del\n                    </button>\n                  </td>\n                </tr>\n              ))\n            : null}\n        </tbody>\n      </Table>\n    );\n  };\n\n  const renderAddProductModal = () => {\n    return (\n      <Modal\n        show={show}\n        handleClose={handleClose}\n        modalTitle={\"Add New Product\"}\n        onSubmit={submitProductForm}\n      >\n        <Input\n          label=\"Name\"\n          value={name}\n          placeholder={`Product Name`}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <Input\n          label=\"Quantity\"\n          value={quantity}\n          placeholder={`Quantity`}\n          onChange={(e) => setQuantity(e.target.value)}\n        />\n        <Input\n          label=\"Price\"\n          value={price}\n          placeholder={`Price`}\n          onChange={(e) => setPrice(e.target.value)}\n        />\n        <Input\n          label=\"Description\"\n          value={description}\n          placeholder={`Description`}\n          onChange={(e) => setDescription(e.target.value)}\n        />\n        <select\n          className=\"form-control\"\n          value={categoryId}\n          onChange={(e) => setCategoryId(e.target.value)}\n        >\n          <option>select category</option>\n          {createCategoryList(category.categories).map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.name}\n            </option>\n          ))}\n        </select>\n        {productPictures.length > 0\n          ? productPictures.map((pic, index) => (\n              <div key={index}>{pic.name}</div>\n            ))\n          : null}\n        <input\n          type=\"file\"\n          name=\"productPicture\"\n          onChange={handleProductPictures}\n        />\n      </Modal>\n    );\n  };\n\n  const handleCloseProductDetailsModal = () => {\n    setProductDetailModal(false);\n  };\n\n  const showProductDetailsModal = (product) => {\n    setProductDetails(product);\n    setProductDetailModal(true);\n  };\n\n  const renderProductDetailsModal = () => {\n    if (!productDetails) {\n      return null;\n    }\n\n    return (\n      <Modal\n        show={productDetailModal}\n        handleClose={handleCloseProductDetailsModal}\n        modalTitle={\"Product Details\"}\n        size=\"lg\"\n      >\n        <Row>\n          <Col md=\"6\">\n            <label className=\"key\">Name</label>\n            <p className=\"value\">{productDetails.name}</p>\n          </Col>\n          <Col md=\"6\">\n            <label className=\"key\">Price</label>\n            <p className=\"value\">{productDetails.price}</p>\n          </Col>\n        </Row>\n        <Row>\n          <Col md=\"6\">\n            <label className=\"key\">Quantity</label>\n            <p className=\"value\">{productDetails.quantity}</p>\n          </Col>\n          <Col md=\"6\">\n            <label className=\"key\">Category</label>\n            <p className=\"value\">{productDetails.category.name}</p>\n          </Col>\n        </Row>\n        <Row>\n          <Col md=\"12\">\n            <label className=\"key\">Description</label>\n            <p className=\"value\">{productDetails.description}</p>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <label className=\"key\">Product Pictures</label>\n            <div style={{ display: \"flex\" }}>\n              {productDetails.productPictures.map((picture) => (\n                <div className=\"productImgContainer\">\n                  <img src={generatePublicUrl(picture.img)} />\n                </div>\n              ))}\n            </div>\n          </Col>\n        </Row>\n      </Modal>\n    );\n  };\n  return (\n    <Layout sidebar>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n              <h3>Products</h3>\n              <button onClick={handleShow}>Add</button>\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Col>{renderProducts()}</Col>\n        </Row>\n      </Container>\n      {renderAddProductModal()}\n      {renderProductDetailsModal()}\n    </Layout>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}